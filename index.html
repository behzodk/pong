<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Classic Pong</title>
  <!-- Retro pixel font -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    /* Set up a vintage-style background for the entire page */
    body {
      margin: 0;
      /* Remove flex centering from body for independent positioning */
      background: radial-gradient(circle at center, #F6B17A, #7077A1 70%);
      position: relative;
      overflow: hidden;
    }

    /* Optional subtle noise texture overlay for added vintage vibe */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2N89+7dfwAH/wN+971w/gAAAABJRU5ErkJggg==");
      opacity: 0.05;
      pointer-events: none;
      z-index: 0;
    }
    
    /* Game title in pixelated 16-bit style positioned at the top of the website */
    #gameTitle {
      position: fixed;
      top: 15%;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-family: 'Press Start 2P', monospace;
      font-size: 24px;
      letter-spacing: 3px;
      background: linear-gradient(45deg, #FF1944, #FFEF00, #00F1FF, #FF1944);
      background-size: 400%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientShift 4s infinite linear;
      text-shadow: 1px 1px 0 #000;
      z-index: 2;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0%; }
      100% { background-position: 100%; }
    }

    /* Container to center the game board */
    #contentWrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    /* Main game board styles */
    #gameBoard {
      width: 800px;
      height: 400px;
      background-color: #0A0A2A;
      position: relative;
      border-radius: 15px; /* subtle CRT-like curve effect */
      overflow: hidden;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
      z-index: 1;
    }
    
    /* Optional CRT scanline overlay on the game board */
    #gameBoard::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        180deg,
        transparent,
        transparent 2px,
        rgba(10, 10, 42, 0.2) 2px,
        rgba(10, 10, 42, 0.2) 4px
      );
      pointer-events: none;
    }
    
    /* Center dashed line (net) */
    #centerLine {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: 0;
      bottom: 0;
      width: 2px;
      background: repeating-linear-gradient(
        to bottom,
        #ffffff,
        #ffffff 10px,
        transparent 10px,
        transparent 20px
      );
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
    }
    
    /* Paddles */
    .paddle {
      position: absolute;
      width: 10px;
      height: 60px;
      background-color: #ffffff;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
    }
    
    #leftPaddle {
      left: 20px;
      top: calc(50% - 30px); /* vertically centered (60px paddle height) */
    }
    
    #rightPaddle {
      right: 20px;
      top: calc(50% - 30px);
    }
    
    /* Ball */
    #ball {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #ffffff;
      border-radius: 50%;  /* Makes the ball round */
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
      left: calc(50% - 5px);
      top: calc(50% - 5px);
    }
    
    /* Score display styling */
    #scoreBoard {
      position: absolute;
      top: 50px; /* Provide space below the title */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      justify-content: space-between;
      width: 180px;
      font-family: 'Press Start 2P', monospace;
      color: #ffffff;
      text-shadow: 0 0 8px rgba(255,255,255,0.5);
      z-index: 2;
    }
    
    #scoreBoard > div {
      font-size: 16px;
    }
    
    /* Style for non-laptop message */
    #notLaptopMsg {
      color: #fff;
      font-size: 24px;
      text-align: center;
      margin-top: 40vh;
      font-family: sans-serif;
      z-index: 3;
      position: relative;
    }
  </style>
</head>
<body>
  <!-- Game title at the top of the website -->
  <div id="gameTitle">PING-PONG</div>
  
  <!-- Content wrapper centers the game board -->
  <div id="contentWrapper">
    <div id="gameBoard">
      <!-- Score display -->
      <div id="scoreBoard">
        <div id="leftScore">0</div>
        <div id="rightScore">0</div>
      </div>
      
      <!-- Center dashed line (net) -->
      <div id="centerLine"></div>
      
      <!-- Paddles -->
      <div class="paddle" id="leftPaddle"></div>
      <div class="paddle" id="rightPaddle"></div>
      
      <!-- Ball -->
      <div id="ball"></div>
    </div>
  </div>
  
  <script>
    // Simple device detection: returns true if the user agent does NOT indicate mobile/tablet.
    function isLaptop() {
      return !(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
    }
    
    // Only launch the game if a laptop is detected.
    if (isLaptop()) {
      // Get elements
      const gameBoard = document.getElementById("gameBoard");
      const leftPaddle = document.getElementById("leftPaddle");
      const rightPaddle = document.getElementById("rightPaddle");
      const ball = document.getElementById("ball");
      const leftScoreEl = document.getElementById("leftScore");
      const rightScoreEl = document.getElementById("rightScore");

      // Scores
      let leftScore = 0;
      let rightScore = 0;

      // Ball properties
      const ballSize = 10;
      const initialSpeedX = 3;
      const initialSpeedY = 2;
      let ballX = gameBoard.clientWidth / 2 - ballSize / 2;
      let ballY = gameBoard.clientHeight / 2 - ballSize / 2;
      let ballVelocityX = initialSpeedX;
      let ballVelocityY = initialSpeedY;
      const accelerationFactor = 1.05; // Increase speed by 5% on paddle hit

      // Paddle properties
      const paddleSpeed = 5;
      let leftPaddleY = gameBoard.clientHeight / 2 - leftPaddle.offsetHeight / 2;
      let rightPaddleY = gameBoard.clientHeight / 2 - rightPaddle.offsetHeight / 2;

      // Object to track key presses
      const keys = {};

      document.addEventListener("keydown", (e) => {
        keys[e.key] = true;
      });

      document.addEventListener("keyup", (e) => {
        keys[e.key] = false;
      });

      // Main game loop using requestAnimationFrame
      function update() {
        // --- Paddle Movement ---
        // Left paddle (W and S keys)
        if (keys["w"] || keys["W"]) {
          leftPaddleY -= paddleSpeed;
        }
        if (keys["s"] || keys["S"]) {
          leftPaddleY += paddleSpeed;
        }
        // Right paddle (ArrowUp and ArrowDown)
        if (keys["ArrowUp"]) {
          rightPaddleY -= paddleSpeed;
        }
        if (keys["ArrowDown"]) {
          rightPaddleY += paddleSpeed;
        }
        
        // Constrain paddles within board boundaries
        leftPaddleY = Math.max(0, Math.min(gameBoard.clientHeight - leftPaddle.offsetHeight, leftPaddleY));
        rightPaddleY = Math.max(0, Math.min(gameBoard.clientHeight - rightPaddle.offsetHeight, rightPaddleY));
        
        leftPaddle.style.top = leftPaddleY + "px";
        rightPaddle.style.top = rightPaddleY + "px";

        // --- Ball Movement ---
        ballX += ballVelocityX;
        ballY += ballVelocityY;

        // Bounce off top and bottom boundaries
        if (ballY <= 0 || ballY + ballSize >= gameBoard.clientHeight) {
          ballVelocityY = -ballVelocityY;
        }

        // --- Paddle Collision ---
        // Left paddle collision check (paddle at left: 20px)
        if (
          ballX <= 20 + leftPaddle.offsetWidth &&
          ballX >= 20 &&
          ballY + ballSize >= leftPaddleY &&
          ballY <= leftPaddleY + leftPaddle.offsetHeight
        ) {
          // Ensure the ball moves right and accelerate speed
          ballVelocityX = Math.abs(ballVelocityX) * accelerationFactor;
          ballVelocityY *= accelerationFactor;
        }

        // Right paddle collision check (calculate right paddle X-position)
        const rightPaddleX = gameBoard.clientWidth - 20 - rightPaddle.offsetWidth;
        if (
          ballX + ballSize >= rightPaddleX &&
          ballX + ballSize <= rightPaddleX + rightPaddle.offsetWidth &&
          ballY + ballSize >= rightPaddleY &&
          ballY <= rightPaddleY + rightPaddle.offsetHeight
        ) {
          // Ensure the ball moves left and accelerate speed
          ballVelocityX = -Math.abs(ballVelocityX) * accelerationFactor;
          ballVelocityY *= accelerationFactor;
        }

        // --- Scoring ---
        // If ball exits left edge, right player scores.
        if (ballX < 0) {
          rightScore++;
          resetBall();
        } 
        // If ball exits right edge, left player scores.
        else if (ballX + ballSize > gameBoard.clientWidth) {
          leftScore++;
          resetBall();
        }

        // Update ball position on the board.
        ball.style.left = ballX + "px";
        ball.style.top = ballY + "px";

        // Update score display
        leftScoreEl.textContent = leftScore;
        rightScoreEl.textContent = rightScore;

        requestAnimationFrame(update);
      }

      // Reset ball to center and initial speed after a score
      function resetBall() {
        ballX = gameBoard.clientWidth / 2 - ballSize / 2;
        ballY = gameBoard.clientHeight / 2 - ballSize / 2;
        // Reverse horizontal direction and reset speed to initial values
        ballVelocityX = -ballVelocityX < 0 ? -initialSpeedX : initialSpeedX;
        ballVelocityY = initialSpeedY * (Math.random() > 0.5 ? 1 : -1);
      }

      // Start the game loop
      requestAnimationFrame(update);
    } else {
      // If not on a laptop, replace the body content with a friendly message.
      document.body.innerHTML = '<div id="notLaptopMsg">Game is only for laptops</div>';
    }
  </script>
</body>
</html>